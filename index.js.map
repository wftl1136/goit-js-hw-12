{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/refs.js","../src/js/render-functions.js","../src/img/error.svg","../src/js/loader.js","../src/js/scroll-to-top.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst myApiKey = '49272526-e1b2de60044cea6af49c76424';\n\nexport const fetchImages =  async (query, page, per_page) => {\n  const response = await axios\n    .get('', {\n      params: {\n        key: myApiKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page,\n        page,\n      },\n    });\n  return response.data;\n};","export const refs = {\n    form: document.querySelector('.form'),\n    inputQuery: document.querySelector('input[name=\"search-text\"]'),\n    btnSearch: document.querySelector('.btn-search'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    btnScrollUp: document.getElementById('scrollToTop'),\n    btnLoad: document.querySelector('.btn-load'),\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { refs } from './refs';\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionData: 'alt',\n    captionDelay: 250,\n  });\n\n  \nexport const renderImages = images => {\n  const gallery = refs.gallery;\n  const galleryItems = images\n    .map(\n      image =>\n        ` <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img class=\"gallery-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n    <div class=\"image-info\">\n      <p><strong>Likes</strong> ${image.likes}</p>\n      <p><strong>Views</strong> ${image.views}</p>\n      <p><strong>Comments</strong> ${image.comments}</p>\n      <p><strong>Downloads</strong> ${image.downloads}</p>\n    </div>\n  </a>\n</li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', galleryItems);\n\n\n  lightbox.refresh();\n};","export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.81%200.219C6.95056%200.0787966%207.14097%204.21785e-05%207.3395%200L16.6605%200C16.859%204.21785e-05%2017.0494%200.0787966%2017.19%200.219L23.781%206.81C23.9212%206.95056%2024%207.14097%2024%207.3395V16.6605C24%2016.859%2023.9212%2017.0494%2023.781%2017.19L17.19%2023.781C17.0494%2023.9212%2016.859%2024%2016.6605%2024H7.3395C7.14097%2024%206.95056%2023.9212%206.81%2023.781L0.219%2017.19C0.0787966%2017.0494%204.21785e-05%2016.859%200%2016.6605L0%207.3395C4.21785e-05%207.14097%200.0787966%206.95056%200.219%206.81L6.81%200.219ZM7.65%201.5L1.5%207.65V16.35L7.65%2022.5H16.35L22.5%2016.35V7.65L16.35%201.5H7.65Z'%20fill='%23FAFAFB'/%3e%3cpath%20d='M6.96888%206.969C7.03854%206.89915%207.12131%206.84374%207.21243%206.80593C7.30354%206.76812%207.40122%206.74866%207.49988%206.74866C7.59853%206.74866%207.69621%206.76812%207.78733%206.80593C7.87844%206.84374%207.96121%206.89915%208.03088%206.969L11.9999%2010.9395L15.9689%206.969C16.0386%206.89927%2016.1214%206.84395%2016.2125%206.80621C16.3036%206.76847%2016.4013%206.74905%2016.4999%206.74905C16.5985%206.74905%2016.6961%206.76847%2016.7873%206.80621C16.8784%206.84395%2016.9611%206.89927%2017.0309%206.969C17.1006%207.03873%2017.1559%207.12151%2017.1937%207.21262C17.2314%207.30373%2017.2508%207.40138%2017.2508%207.5C17.2508%207.59861%2017.2314%207.69626%2017.1937%207.78737C17.1559%207.87848%2017.1006%207.96127%2017.0309%208.031L13.0604%2012L17.0309%2015.969C17.1006%2016.0387%2017.1559%2016.1215%2017.1937%2016.2126C17.2314%2016.3037%2017.2508%2016.4014%2017.2508%2016.5C17.2508%2016.5986%2017.2314%2016.6963%2017.1937%2016.7874C17.1559%2016.8785%2017.1006%2016.9613%2017.0309%2017.031C16.9611%2017.1007%2016.8784%2017.156%2016.7873%2017.1938C16.6961%2017.2315%2016.5985%2017.2509%2016.4999%2017.2509C16.4013%2017.2509%2016.3036%2017.2315%2016.2125%2017.1938C16.1214%2017.156%2016.0386%2017.1007%2015.9689%2017.031L11.9999%2013.0605L8.03088%2017.031C7.96114%2017.1007%207.87836%2017.156%207.78725%2017.1938C7.69614%2017.2315%207.59849%2017.2509%207.49988%2017.2509C7.40126%2017.2509%207.30361%2017.2315%207.2125%2017.1938C7.12139%2017.156%207.03861%2017.1007%206.96888%2017.031C6.89914%2016.9613%206.84383%2016.8785%206.80609%2016.7874C6.76835%2016.6963%206.74893%2016.5986%206.74893%2016.5C6.74893%2016.4014%206.76835%2016.3037%206.80609%2016.2126C6.84383%2016.1215%206.89914%2016.0387%206.96888%2015.969L10.9394%2012L6.96888%208.031C6.89903%207.96133%206.84362%207.87857%206.80581%207.78745C6.768%207.69633%206.74854%207.59865%206.74854%207.5C6.74854%207.40135%206.768%207.30366%206.80581%207.21255C6.84362%207.12143%206.89903%207.03867%206.96888%206.969Z'%20fill='%23FAFAFB'/%3e%3c/svg%3e\"","import { refs } from './refs';\n\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}","import { refs } from \"./refs\"; \n\nexport const scrollShow = () => {\n    if (window.scrollY > 300) {\n        refs.btnScrollUp.classList.add(\"show\");\n    } else {\n        refs.btnScrollUp.classList.remove(\"show\");\n    }\n};\n\nexport const scrollToTop = () => {\n    window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n    })\n};","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { refs } from './js/refs';\nimport { renderImages } from './js/render-functions';\nimport iconError from './img/error.svg';\nimport { showLoader, hideLoader } from './js/loader';\nimport { scrollShow, scrollToTop } from './js/scroll-to-top';\n\n\nlet page = 1;\nlet isLoading = false;\nlet currentQuery = '';\nlet totalHits = 0;\nexport const per_page = 15;\n\n\nrefs.form.addEventListener('submit', event => {\n    event.preventDefault();\n\n  const query = refs.inputQuery.value.trim();\n  if (!query) {\n     iziToast.warning({\n      title: 'Caution',\n      message: 'The form cannot be empty! Please check and fill it out.',\n      position: 'topRight',\n      maxWidth: 300,\n     });\n      refs.inputQuery.value = '';\n      return;\n    }\n    currentQuery = query;\n    page = 1;\n    refs.gallery.innerHTML = '';\n    loadImages();\n    refs.inputQuery.value = '';\n});\n\nconst loadImages = async () => {\n  if (isLoading) {\n    return;\n  }\n  isLoading = true;\n  showLoader();\n  try { const data = await fetchImages(currentQuery, page, per_page)\n      const images = data.hits;\n      totalHits = data.totalHits;\n      if (images.length === 0) {\n        iziToast.error({\n          message:\n            ' Sorry, there are no images matching your search query.Please try again!',\n          messageColor: '#FAFAFB',\n          position: 'topRight',\n          backgroundColor: '#EF4040',\n          borderColor: '#FFBEBE',\n          maxWidth: 432,\n          class: 'custom-toast',\n          theme: 'dark',\n          iconUrl: iconError,\n        });\n        return;\n      } \n        renderImages(images);\n        const card = document.querySelector('.gallery-item');\n        const cardsHeight = card.getBoundingClientRect().height;\n        if (page >1 ) {\n          window.scrollBy({\n          top: cardsHeight * 2,\n          left: 0,\n          behavior: 'smooth'\n        });\n        } \n        const totalPages = Math.ceil(totalHits / per_page);;\n        if (page >= totalPages) {\n          iziToast.info({\n            title: 'End of results',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'bottomRight',\n            backgroundColor: '#ff3d00',\n            messageColor: '#FAFAFB',\n          });\n          refs.btnLoad.style.display = 'none';\n        } else {\n          refs.btnLoad.style.display = \"block\";\n          page += 1;\n        }\n } catch (error)  {\n      console.error('Error:', error);\n      iziToast.error({\n        title: 'error',\n        message: error.message || 'Something went wrong. Please try again.',\n        \n      });\n    }\n    finally {\n      isLoading = false;\n      hideLoader();\n    }\n};\n\nrefs.btnLoad.addEventListener('click', loadImages)\nwindow.addEventListener('scroll', scrollShow);\nrefs.btnScrollUp.addEventListener('click', scrollToTop);\n\n/*\nconst loadScroll = () => {\n    if (isLoading) {\n        return;\n    }\n  const scrollPosition = window.scrollY + window.innerHeight;\n  const pageHeight = document.documentElement.scrollHeight;\n  if (scrollPosition >= pageHeight - 350 && (page - 1) * 21 < totalHits) {\n    loadImages();\n  }\n};\nwindow.addEventListener('scroll', loadScroll);\n*/"],"names":["axios","myApiKey","fetchImages","query","page","per_page","refs","lightbox","SimpleLightbox","renderImages","images","gallery","galleryItems","image","iconError","showLoader","hideLoader","scrollShow","scrollToTop","isLoading","currentQuery","totalHits","event","iziToast","loadImages","data","cardsHeight","totalPages","error"],"mappings":"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"}